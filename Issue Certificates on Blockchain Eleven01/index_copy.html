
<!doctype html>
<html class="requstor-bgcolor" lang="en">
	 <head>
      <!-- Required meta tags -->
      <meta charset="utf-8">
       <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />

      <meta name="keywords" content="....">
      <meta name="description" content="....">
      <link rel="shortcut icon" type="image/png" href="images/favicon.png"/>
      <!-- Bootstrap CSS -->
      <link rel="stylesheet" href="css/custom.css" />
      <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
      <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
      <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	  -->
	  
	  <script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js@1.0.0-beta.36/dist/web3.min.js" integrity="sha256-nWBTbvxhJgjslRyuAKJHK+XcZPlCnmIAAMixz6EefVk=" crossorigin="anonymous"></script>
 
 <title>Eleven01 Certificate</title> 
 </head>
   <body class="requstor-bgcolor">
      <header class="static-header"  >
         <div>
            <div class="row">
               <div class="col-md-7 col">
                  <a href="index.html" class="logo mywallet">
                  <img alt="Eleven01" src="images/tech1.png" class="">
                  </a>
			   </div>
			   <div class="col-md-2 col">
				<button id="approver" class="btn our-buttons1 buttons-common-3">Approver
		        </button>
			   </div>
			   <div class="col-md-2 col">
					<button id="search" class="btn our-buttons1 buttons-common-3">Search
					</button>
				 </div>
			 </div>
			
                
            </div>
         </div>
      </header>
      <section class="mywallet main-content">
          <div class="container">
            <div class="wrapper">
<div class="row p-0">
	<div class="col-md-12 text-right"><h5>RPC EndPoint: http://13.83.91.1:8083/api/node/rpc</h5></div>
	<div class="col-md-8">
	<img style="width:100%;height:100%" src="images/logo.jpeg"/>
	  </div>
 
    <div class="col-md-4"> 
        <h4 class="text-muted">Details of the certificate</h4>
		<div class="mb-3">
			<label for="employeeid">Employee Id</label>
			<input type="text" class="form-control our-inputs" id="employeeid" placeholder=" employeeId" required="">
		  </div>
              <div class="mb-3">
                <label for="issuername">Issuer Name</label>
                <input type="text" value="TechMahindra" readonly class="form-control our-inputs" id="issuername" placeholder=" IssuerName">
			  </div>
              <div class="mb-3">
                  <label for="grade">Candidate Name</label>
                  <input type="text" class="form-control our-inputs" id="candidatename" placeholder="CandidateName" required="">
                </div>
                <div class="mb-3">
						<label for="coursename">Course Name</label>
					<select name="coursename" class="form-control our-inputs" id="coursename" required="">
							<option style="display:none"value="">select</option>
						    <option value="ethereum">Ethereum</option>
							<option value="hyperledger">Hyperledger</option>
							<option value="corda">Corda</option>
							<option value="quorum">Quorum</option>
							<option value="solidity">Solidity Developer</option>
							<option value="iota">IOTA</option>
							<option value="multichain">Multichain</option>
							<option value="bigchaindb">BigchainDB</option>
							<option value="go">Go Developer</option>
						  </select>
                  </div>
                  <div class="mb-3">
					   <label for="location">Location</label>
					   <select name="location" class="form-control our-inputs" id="location"  required="">
							   <option style="display:none"value="">select</option>
							   <option value="bangalore">Bangalore</option>
							   <option value="chandigarh">Chandigarh</option>
							   <option value="chennai">Chennai</option> 
							   <option value="gandhinagar">Gandhinagar</option>
							   <option value="gurgaon">Gurgaon</option>
							   <option value="hyderabad">Hyderabad</option>
							   <option value="mumbai">Mumbai</option>
							   <option value="pune">Pune</option>
							 </select>
						  </div>
						  <div class="mb-3">
								<label for="startdate">Start Date</label>
								<input type="text" class="form-control our-inputs" id="startdate" placeholder="StartDate" required="">
							  </div>
                          <div class="mb-3">
               <label for="enddate">End Date</label>
                  <input type="text" class="form-control our-inputs" id="enddate" placeholder="EndDate" required="">
					  </div>
					  <div class="mb-3">
							<label for="hours">Learning Hours</label>
							   <input type="text" class="form-control our-inputs" id="hours" placeholder="Hours" required="">
								   </div>
								   <div class="mb-3" style="display:none">
									<label for="privatekey" >Private Key</label>
									   <input type="text" class="form-control our-inputs" id="privatekey" value="aaaaaa" placeholder="privatekey" required="">
										   </div>
        
          <button id="button" class="btn our-buttons buttons-common-1">Register
          </button>
      </div> 
	  
  </div>              
            </div>
          </div>
         
	  </section>
	  

	  
			<footer align="center" class="mt-5">
		<p>To Check The Details Go to page: <a href="verify.html"><strong>Verify</strong></a></p>
		  </footer>
      
     


		  <button id="clickMe" type="button" value="clickme" onclick="getTransactionsByAccount()">Click me</button>


<style type="text/css">
 h1,h2, h3, h4, h5, h6{color: #394240}
.certificate-4{
    font-family: 'Merriweather', serif;
/* font-family: 'Merriweather', serif;
font-family: 'Roboto Slab', serif; */
    background: #fff;    padding: 40px 20px;    border: #394240 solid 6px;   /* background: url(images/certificate/certificate-3-bg.png);
    */ background-position: center center;    background-size: auto;    background-repeat: no-repeat;    text-align: center;   }

    .certificate-4 h1{ font-size: 45px; font-weight: 700}
    .certificate-4 h3{ font-size: 30px; font-weight: 700}
    .certificate-4 .small-texts{ font-size: 13px; font-style: italic}
.certificate-4 .certificate-footer p{margin-bottom: 5px; font-size: 12px; text-align: center; line-height: 14px}
.certificate-4 .certificate-footer p.subtitle{font-weight: 700; font-size: 14px; color: #555}
.certificate-4 .certificate-footer div{text-align:center; color:#8e8a8a; border-top: solid 2px #8e8a8a; margin-top: 20px; padding-top: 10px; line-height: 16px;
margin-bottom: 20px;}
.certificate-4 .certificate-body{margin-bottom:15px; padding: 20px 0px}
.certificate-4 .certificate-footer{margin:15px; font-size: 13px  }
.certificate-4 h6{font-family:  'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', 
sans-serif; color:#555; font-size: 11px;}

.certificate-4 .trash-hash-title{ font-size: 11px;}
.certificate-4 .trash-hash-text{font-size: 10px;word-break: break-all; line-height: 18px !important; display: inline-block;}
.certificate-4 .issuedby{font-size: 9px;word-break: break-all; }
 

</style>


 
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script> -->
    <script>
    
    // if (typeof web3 !== "undefined") {
    //     web3 = new Web3(web3.currentProvider);
    // } else {
    //     web3 = new Web3(new Web3.providers.HttpProvider("http://13.83.91.1:8083/api/node/rpc"));
    //   }

      //Replace with your ABI
	  //<input id="clickMe" type="button" value="clickme" onclick="getTransactionsByAccount();"/>
	  
      var abi = [
	{
		"constant": false,
		"inputs": [
			{
				"name": "EmpId",
				"type": "string"
			},
			{
				"name": "IssuerName",
				"type": "string"
			},
			{
				"name": "CandidateName",
				"type": "string"
			},
			{
				"name": "CourseName",
				"type": "string"
			},
			{
				"name": "Location",
				"type": "string"
			},
			{
				"name": "DateOfStart",
				"type": "uint256"
			},
			{
				"name": "DateOfCompletion",
				"type": "uint256"
			},
			{
				"name": "NumHours",
				"type": "uint256"
			}
		],
		"name": "certificateIssue",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"name": "EmpId",
				"type": "string"
			},
			{
				"indexed": false,
				"name": "IssuerName",
				"type": "string"
			},
			{
				"indexed": false,
				"name": "CandidateName",
				"type": "string"
			},
			{
				"indexed": false,
				"name": "CourseName",
				"type": "string"
			},
			{
				"indexed": false,
				"name": "Location",
				"type": "string"
			},
			{
				"indexed": false,
				"name": "DateOfStart",
				"type": "uint256"
			},
			{
				"indexed": false,
				"name": "DateOfCompletion",
				"type": "uint256"
			},
			{
				"indexed": false,
				"name": "NumHours",
				"type": "uint256"
			}
		],
		"name": "CertificateEvent",
		"type": "event"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "admin",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"name": "certificateData",
		"outputs": [
			{
				"name": "Id",
				"type": "uint256"
			},
			{
				"name": "Issuer",
				"type": "address"
			},
			{
				"name": "EmpId",
				"type": "string"
			},
			{
				"name": "IssuerName",
				"type": "string"
			},
			{
				"name": "CandidateName",
				"type": "string"
			},
			{
				"name": "CourseName",
				"type": "string"
			},
			{
				"name": "Location",
				"type": "string"
			},
			{
				"name": "DateOfStart",
				"type": "uint256"
			},
			{
				"name": "DateOfCompletion",
				"type": "uint256"
			},
			{
				"name": "NumHours",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "certificateDataCount",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	}
];
    //Replace with your contract address

		var contractAddress = 
		"0x8d256b3f1cadc3828c31825cbd126a67c27a9134";
		var privKey = "C9A9FC8220C269298D033087B2EFEBBDFCFA6E64A416ABC73B2E1A600C1A5578";
		var walletAddress = "0x43e4fC64DBceFf83aD9D8411DeAb97eAe228FfcD";
		
		async function init() {
			window.addEventListener('load', async () => {
if (window.ethereum) {
window.web3 = new Web3(window.ethereum);
await window.ethereum.enable();
var web3 = new Web3(Web3.givenProvider)
var accounts = await web3.eth.getAccounts();

account = accounts[0];
Certificate = await new web3.eth.Contract(abi, contractAddress);
console.log(Certificate)
console.log(accounts)
}
else {
console.log('Non-Ethereum browser detected. You should consider trying MetaMask!');
}
})
		// 	Certificate = await new web3.eth.Contract(abi, contractAddress);
        //   var accounts = await web3.eth.getAccounts();
		//   web3.eth.defaultAccount = accounts[0];
		}
        init();
		
        async function register() {
			//console.log('register',account);
			var EmployeeId = document.getElementById('employeeid').value;
            var IssuerName = document.getElementById('issuername').value;
            var CandidateName = document.getElementById('candidatename').value;
            var CourseName = document.getElementById('coursename').value;
            var Location = document.getElementById('location').value;
			var StartDate = document.getElementById('startdate').value;
            var EndDate = document.getElementById('enddate').value;
            var Hours = document.getElementById('hours').value;


            Certificate.methods.certificateIssue(EmployeeId,IssuerName,CandidateName,CourseName,Location,StartDate,EndDate,Hours).send({from: account}).on('receipt', function(receipt){
				console.log(receipt);

				document.getElementById('employeeid').textContent = receipt.events.CertificateEvent.returnValues.EmployeeId;
                document.getElementById('IssuerName').textContent = receipt.events.CertificateEvent.returnValues.IssuerName;
                document.getElementById('CandidateName').textContent = receipt.events.CertificateEvent.returnValues.CandidateName;
                document.getElementById('CourseName').textContent = receipt.events.CertificateEvent.returnValues.CourseName;
                document.getElementById('Location').textContent = receipt.events.CertificateEvent.returnValues.Location;
				document.getElementById('StartDate').textContent = receipt.events.CertificateEvent.returnValues.StartDate;
                document.getElementById('EndDate').textContent = receipt.events.CertificateEvent.returnValues.EndDate;
				document.getElementById('hours').textContent = receipt.events.CertificateEvent.returnValues.Hours;
				document.getElementById("Registerhash").innerHTML = receipt.transactionHash;

				console.log('EmployeeId',EmployeeId);
				console.log('IssuerName',IssuerName);
				console.log('CandidateName',CandidateName);
				console.log('CourseName',CourseName);
				console.log('Location',Location);
				console.log('StartDate',StartDate);
				console.log('EndDate',EndDate);
				console.log('Hours',Hours);
				console.log('Registerhash', Registerhash)
				
				
            });
        }
		document.getElementById('button').addEventListener('click', register);
		
		
        document.getElementById("clickMe").onclick = function getTransactionsByAccount(myaccount, startBlockNumber, endBlockNumber) {
			
			  //myaccount = "0x43e4fC64DBceFf83aD9D8411DeAb97eAe228FfcD";
				web3.eth.getBlockNumber().then(console.log);
				web3.eth.getTransactionCount("0x43e4fC64DBceFf83aD9D8411DeAb97eAe228FfcD").then(console.log);
				web3.eth.getAccounts(console.log);
				/*web3.eth.getTransactionCount("0x43e4fC64DBceFf83aD9D8411DeAb97eAe228FfcD")
 .then((b=console.log)=>{
	console.log("NUmber of transactions are: ",b)
    for(var i=0;i<b;i++){
            web3.eth.getBlock(b-i).then((Block)=>
            {
				console.log("Block is :",Block);
            a =[
                            Block.hash
                 ]
                     console.log("Block Hash is: ",a);
                 var  iterator =a.values()
                 for (let elements of iterator) { 
             web3.eth.getTransactionFromBlock(elements).then(console.log)


                } 
             });
         }
		 });*/
	/*	 if (endBlockNumber == null) {
				//endBlockNumber = web3.eth.blockNumber;
				web3.eth.getBlockNumber().then((endBlockNumber = console.log)=>{
					console.log("Using endBlockNumber: " + endBlockNumber);
				});
    			
  			}
  			if (startBlockNumber == null) {
				startBlockNumber = 300000;
    			//startBlockNumber = endBlockNumber - 1000;
    			console.log("Using startBlockNumber: " + startBlockNumber);
			  }
			  	endBlockNumber = 360971;
  				console.log("Searching for transactions to/from account \"" + myaccount + "\" within blocks "  + endBlockNumber + " and " + startBlockNumber);

  				for (var i = startBlockNumber; i <= endBlockNumber; i++) {
    			if (i % 1000 == 0) {
      					//console.log("Searching block " + i);
    			}
    				var block = web3.eth.getBlock(i, true);
    				if (block != null && block.transactions != null) {
      				block.transactions.forEach( function(e) {
        			if (myaccount == "*" || myaccount == e.from || myaccount == e.to) {
         				 console.log("  tx hash          : " + e.hash + "\n"
           				 + "   nonce           : " + e.nonce + "\n"
           				 + "   blockHash       : " + e.blockHash + "\n"
           				 + "   blockNumber     : " + e.blockNumber + "\n"
           				 + "   transactionIndex: " + e.transactionIndex + "\n"
           				 + "   from            : " + e.from + "\n" 
           				 + "   to              : " + e.to + "\n"
           				 + "   value           : " + e.value + "\n"
           				 + "   time            : " + block.timestamp + " " + new Date(block.timestamp * 1000).toGMTString() + "\n"
           				 + "   gasPrice        : " + e.gasPrice + "\n"
            			+ "   gas             : " + e.gas + "\n"
            			+ "   input           : " + e.input);
        			}
     				})
    }
  }
}*/

		}		

    </script>
  </body>
</html>